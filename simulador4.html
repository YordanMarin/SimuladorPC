<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Simulador de Productividad y Colaboraci√≥n Digital</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%);
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    main {
      width: 100%;
      max-width: 1100px;
      margin: 16px;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(148, 163, 184, 0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    header {
      padding: 16px 20px 10px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.25);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    header h1 {
      margin: 0;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    header h1 span.chip {
      font-size: 0.7rem;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(248, 250, 252, 0.06);
      color: #e5e7eb;
      border: 1px solid rgba(148, 163, 184, 0.7);
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    #controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
      align-items: center;
    }

    button {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 0.8rem;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #020617;
      color: #e5e7eb;
      border: 1px solid rgba(148, 163, 184, 0.6);
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.12s ease;
    }

    button span.icon {
      font-size: 0.9rem;
    }

    button:hover {
      background: #0b1120;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.6);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0) scale(0.98);
      box-shadow: none;
    }

    .badge {
      font-size: 0.72rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: #e5e7eb;
      white-space: nowrap;
    }

    .badge-ok {
      background: rgba(22, 163, 74, 0.12);
      border-color: rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
      animation: parpadeoListo 1s ease-in-out infinite;
    }

    @keyframes parpadeoListo {
      0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.3); }
      50% { box-shadow: 0 0 0 6px rgba(22, 163, 74, 0); }
    }

    #layout {
      display: grid;
      grid-template-columns: minmax(260px, 320px) minmax(0, 1fr);
      flex: 1;
      min-height: 420px;
    }

    #panel-izq {
      border-right: 1px solid rgba(148, 163, 184, 0.2);
      padding: 14px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.12), transparent 55%);
    }

    #panel-der {
      padding: 14px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    h2 {
      font-size: 0.9rem;
      margin: 0;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #94a3b8;
    }

    #estado {
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    #progreso-linea {
      position: relative;
      width: 100%;
      height: 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 1);
      overflow: hidden;
      border: 1px solid rgba(51, 65, 85, 0.9);
    }

    #progreso-barra {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, #22c55e, #22d3ee);
      transition: width 0.2s ease-out;
    }

    #mensaje-principal {
      font-size: 0.78rem;
      color: #9ca3af;
    }

    #estadisticas {
      font-size: 0.78rem;
      color: #cbd5f5;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    #estadisticas span {
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    #lista-escenarios {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: 280px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .escenario {
      border-radius: 10px;
      padding: 8px 10px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(55, 65, 81, 0.9);
      cursor: pointer;
      font-size: 0.8rem;
      display: flex;
      gap: 8px;
      align-items: flex-start;
      transition: background 0.12s ease, border 0.12s ease, transform 0.08s ease;
    }

    .escenario:hover {
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.18), rgba(15, 23, 42, 0.98));
      border-color: rgba(56, 189, 248, 0.9);
      transform: translateY(-1px);
    }

    .escenario-activo {
      background: radial-gradient(circle at top left, rgba(96, 165, 250, 0.2), rgba(15, 23, 42, 0.98));
      border-color: rgba(96, 165, 250, 0.9);
      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.9);
    }

    .escenario-resuelto {
      border-color: rgba(34, 197, 94, 0.9);
      background: radial-gradient(circle at top left, rgba(22, 163, 74, 0.18), rgba(15, 23, 42, 0.98));
    }

    .escenario-icono {
      font-size: 1.2rem;
      margin-top: 2px;
    }

    .escenario-textos {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .escenario-titulo {
      font-weight: 600;
      color: #e5e7eb;
    }

    .escenario-tags {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    #tips {
      font-size: 0.75rem;
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px dashed rgba(148, 163, 184, 0.6);
      color: #9ca3af;
      margin-top: 6px;
    }

    #tips span.icon {
      margin-right: 6px;
    }

    /* Panel derecho */

    #detalle-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    #detalle-encabezado {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    #detalle-encabezado small {
      font-size: 0.72rem;
      color: #9ca3af;
    }

    #detalle-escenario {
      border-radius: 14px;
      padding: 10px 12px;
      background: radial-gradient(circle at top right, rgba(59, 130, 246, 0.22), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.7);
      min-height: 170px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 0.82rem;
    }

    #detalle-titulo {
      font-weight: 600;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    #detalle-descripcion {
      color: #e5e7eb;
      line-height: 1.35;
    }

    #detalle-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.72rem;
    }

    .badge-mini {
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.7);
    }

    .badge-eje {
      background: rgba(59, 130, 246, 0.18);
      border-color: rgba(96, 165, 250, 0.9);
      color: #dbeafe;
    }

    .badge-bienestar {
      background: rgba(22, 163, 74, 0.18);
      border-color: rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
    }

    #nivel-botones {
      margin-top: 4px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn-nivel {
      flex: 1;
      min-width: 140px;
      justify-content: center;
      border-radius: 10px;
    }

    .btn-nivel[data-nivel="bajo"] {
      border-color: rgba(148, 163, 184, 0.9);
    }

    .btn-nivel[data-nivel="medio"] {
      border-color: rgba(250, 204, 21, 0.9);
    }

    .btn-nivel[data-nivel="alto"] {
      border-color: rgba(34, 197, 94, 0.9);
    }

    .btn-nivel-desactivado {
      opacity: 0.6;
      cursor: default;
      pointer-events: none;
    }

    #resultado {
      border-radius: 12px;
      padding: 8px 10px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(75, 85, 99, 0.9);
      font-size: 0.78rem;
      min-height: 90px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    #resultado-linea {
      font-weight: 600;
    }

    #resultado-linea.ok {
      color: #bbf7d0;
    }

    #resultado-linea.error {
      color: #fecaca;
    }

    #resultado-explicacion {
      color: #e5e7eb;
    }

    #resultado-mejora {
      color: #bfdbfe;
    }

    #panel-mensajes {
      margin-top: 2px;
      border-radius: 12px;
      padding: 8px 10px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 0.76rem;
      max-height: 130px;
      overflow-y: auto;
    }

    #panel-mensajes .mensaje {
      margin-bottom: 4px;
      line-height: 1.35;
    }

    #panel-mensajes .mensaje small {
      color: #6b7280;
      font-size: 0.68rem;
    }

    #panel-mensajes .mensaje-ok {
      color: #bbf7d0;
    }

    #panel-mensajes .mensaje-error {
      color: #fecaca;
    }

    #panel-mensajes .mensaje-info {
      color: #bfdbfe;
    }

    @media (max-width: 820px) {
      #layout {
        grid-template-columns: 1fr;
      }
      #panel-izq {
        border-right: none;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }
      main {
        margin: 8px;
      }
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      #controls {
        width: 100%;
        justify-content: space-between;
      }
    }
  </style>
</head>
<body>
  <main>
    <header>
      <h1>
        üåê Simulador de Productividad y Colaboraci√≥n Digital
        <span class="chip">Laboratorio de pr√°cticas saludables</span>
      </h1>
      <div id="controls">
        <span id="estado-pasos" class="badge">
          Retos completados: <span id="resueltos-num">0</span>/<span id="total-num">0</span>
        </span>
        <button id="btn-sugerir" type="button">
          <span class="icon">üéØ</span>
          Sugerir siguiente reto
        </button>
        <button id="btn-reiniciar" type="button">
          <span class="icon">üîÑ</span>
          Reiniciar simulaci√≥n
        </button>
      </div>
    </header>

    <section id="layout">
      <!-- Panel izquierdo: lista de escenarios -->
      <aside id="panel-izq">
        <h2>Retos digitales</h2>
        <div id="estado">
          <span>Elige un reto, lee la situaci√≥n y decide qu√© tan buena es la estrategia digital.</span>
          <div id="progreso-linea">
            <div id="progreso-barra"></div>
          </div>
          <div id="estadisticas">
            <span id="stat-aciertos">‚úÖ Aciertos: 0</span>
            <span id="stat-errores">‚ö†Ô∏è Intentos: 0</span>
          </div>
          <span id="mensaje-principal"></span>
        </div>

        <div id="lista-escenarios">
          <!-- Se llena desde JS -->
        </div>

        <div id="tips">
          <span class="icon">üí°</span>
          Piensa en pr√°cticas que combinen:
          <strong>creatividad</strong>, <strong>inclusi√≥n</strong>, <strong>colaboraci√≥n respetuosa</strong> y
          <strong>cuidado de tu bienestar</strong>. No todo es productividad: tambi√©n importa tu salud digital.
        </div>
      </aside>

      <!-- Panel derecho: detalle de escenario -->
      <section id="panel-der">
        <div id="detalle-wrapper">
          <div id="detalle-encabezado">
            <h2>Evaluaci√≥n de pr√°cticas digitales</h2>
            <small>Clasifica la estrategia: ¬øpoco efectiva, aceptable o muy saludable?</small>
          </div>

          <div id="detalle-escenario">
            <div id="detalle-titulo">
              <span>üëÄ Selecciona un reto en la lista para empezar.</span>
            </div>
            <div id="detalle-descripcion">
              Ver√°s aqu√≠ la descripci√≥n completa del reto sobre productividad, colaboraci√≥n o bienestar digital.
            </div>
            <div id="detalle-badges"></div>

            <div id="nivel-botones">
              <button class="btn-nivel btn-nivel-desactivado" data-nivel="bajo">
                üòï Poco efectiva
              </button>
              <button class="btn-nivel btn-nivel-desactivado" data-nivel="medio">
                üôÇ Aceptable
              </button>
              <button class="btn-nivel btn-nivel-desactivado" data-nivel="alto">
                üöÄ Muy efectiva y saludable
              </button>
            </div>
          </div>

          <div id="resultado">
            <div id="resultado-linea">Resultado de tu elecci√≥n‚Ä¶</div>
            <div id="resultado-explicacion"></div>
            <div id="resultado-mejora"></div>
          </div>

          <div id="panel-mensajes">
            <!-- Mensajes din√°micos -->
          </div>
        </div>
      </section>
    </section>
  </main>

  <script>
    (function () {
      // -------------------------
      // Escenarios del simulador
      // -------------------------
      const escenarios = [
        {
          id: 1,
          icono: "üé®",
          titulo: "Presentaci√≥n creativa e inclusiva",
          eje: "Productividad digital",
          etiquetas: ["Creatividad", "Formatos digitales", "Accesibilidad"],
          nivelEsperado: "alto",
          descripcion:
            "Un grupo debe exponer un trabajo. En lugar de solo diapositivas con mucho texto, crean una presentaci√≥n con im√°genes, un peque√±o video explicativo y a√±aden subt√≠tulos para que personas con dificultades auditivas puedan seguirla.",
          explicacion:
            "La estrategia aprovecha varios formatos digitales (im√°genes, video, texto) y adem√°s piensa en la accesibilidad con los subt√≠tulos. Esto aumenta la comprensi√≥n y la inclusi√≥n de todo el grupo.",
          mejora:
            "Piensa siempre c√≥mo tu contenido se ver√° y se escuchar√° en distintos dispositivos y para distintas personas. A√±adir subt√≠tulos, descripciones y buenos contrastes de color hace tu trabajo m√°s profesional."
        },
        {
          id: 2,
          icono: "‚åõ",
          titulo: "Tareas digitales sin planificaci√≥n",
          eje: "Productividad digital",
          etiquetas: ["Organizaci√≥n", "Gesti√≥n del tiempo"],
          nivelEsperado: "bajo",
          descripcion:
            "Un estudiante recibe muchas tareas en plataformas virtuales y decide ir haciendo todo 'como vaya saliendo', sin calendario ni listado de prioridades. Constantemente siente que se le olvida algo.",
          explicacion:
            "La estrategia es poco efectiva porque depende solo de la memoria y no aprovecha herramientas digitales de organizaci√≥n. Eso aumenta el estr√©s y las posibilidades de olvidar actividades.",
          mejora:
            "Usa agendas digitales, listas de tareas o recordatorios en el calendario. Agrupa tareas similares y reserva bloques de tiempo para concentrarte en cada una."
        },
        {
          id: 3,
          icono: "üß©",
          titulo: "Buscar soluciones antes de pedir ayuda",
          eje: "Productividad digital",
          etiquetas: ["Resoluci√≥n de problemas", "Autonom√≠a"],
          nivelEsperado: "medio",
          descripcion:
            "Antes de escribir al docente, una estudiante intenta solucionar un problema t√©cnico buscando en la ayuda del sistema, un tutorial corto y la secci√≥n de preguntas frecuentes. Si no lo logra, reci√©n entonces pide apoyo.",
          explicacion:
            "La estrategia es bastante efectiva: intenta primero resolver el problema usando recursos digitales disponibles y solo despu√©s pide ayuda. Esto desarrolla autonom√≠a y habilidades de b√∫squeda.",
          mejora:
            "Es positivo buscar primero, pero pon l√≠mites de tiempo. Si despu√©s de un rato no encuentras soluci√≥n, pedir apoyo es parte de una buena gesti√≥n del tiempo."
        },
        {
          id: 4,
          icono: "üåç",
          titulo: "Documento colaborativo con equipo internacional",
          eje: "Colaboraci√≥n global",
          etiquetas: ["Trabajo en equipo", "Interacci√≥n digital", "Colaboraci√≥n global"],
          nivelEsperado: "alto",
          descripcion:
            "Estudiantes de distintos pa√≠ses preparan un informe usando un documento en l√≠nea compartido. Definen roles, usan comentarios para dar retroalimentaci√≥n y atan tareas con fechas. Adem√°s, acuerdan normas de respeto en el chat.",
          explicacion:
            "La estrategia usa herramientas colaborativas en tiempo real, distribuye roles y mantiene normas claras de comunicaci√≥n. Esto favorece la colaboraci√≥n global y el respeto intercultural.",
          mejora:
            "A√±adir breves reuniones virtuales para revisar avances y asegurarse de que todas las voces sean escuchadas puede potenciar a√∫n m√°s el trabajo."
        },
        {
          id: 5,
          icono: "üå±",
          titulo: "Entregas pesadas por correo a todo el curso",
          eje: "Colaboraci√≥n global",
          etiquetas: ["Sostenibilidad digital", "Uso responsable"],
          nivelEsperado: "bajo",
          descripcion:
            "Para compartir un video de la clase, un estudiante reenv√≠a por correo archivos muy pesados a todos sus compa√±eros, varias veces, sin usar enlaces ni plataformas compartidas.",
          explicacion:
            "Es una pr√°ctica poco sostenible digitalmente: genera mucho tr√°fico innecesario, ocupa espacios de almacenamiento y puede saturar bandejas de entrada.",
          mejora:
            "Sube el material a una plataforma compartida o nube institucional y comparte solo el enlace. As√≠ reduces copias, facilitas el acceso y cuidas mejor los recursos."
        },
        {
          id: 6,
          icono: "üì∂",
          titulo: "Ajuste de horarios por diferencias de zona",
          eje: "Colaboraci√≥n global",
          etiquetas: ["Empat√≠a digital", "Organizaci√≥n"],
          nivelEsperado: "alto",
          descripcion:
            "Un equipo con personas de varios pa√≠ses usa una herramienta de horarios para encontrar horas razonables para todas. Rotan la hora de la reuni√≥n para que el sacrificio de levantarse muy temprano no siempre sea para las mismas personas.",
          explicacion:
            "La estrategia es muy efectiva: respeta los tiempos de cada persona, usa herramientas digitales para coordinar y distribuye el esfuerzo de manera justa.",
          mejora:
            "Registrar acuerdos en un documento compartido ayuda a que nadie se pierda cambios de horarios y facilita la comunicaci√≥n."
        },
        {
          id: 7,
          icono: "üíº",
          titulo: "Trabajo remoto sin pausas ni l√≠mites",
          eje: "Colaboraci√≥n remota",
          etiquetas: ["Equilibrio digital", "Autocuidado"],
          nivelEsperado: "bajo",
          descripcion:
            "Un estudiante que trabaja y estudia remotamente deja siempre abiertas las apps de trabajo, responde mensajes a cualquier hora y revisa notificaciones incluso de madrugada.",
          explicacion:
            "Esta pr√°ctica es poco saludable: dificulta la desconexi√≥n, aumenta el estr√©s y confunde los l√≠mites entre estudio, trabajo y descanso.",
          mejora:
            "Define horarios claros, configura periodos de 'no molestar' en tus dispositivos y acuerda con tu equipo tiempos razonables para responder mensajes."
        },
        {
          id: 8,
          icono: "üßò",
          titulo: "Rutinas para clases virtuales largas",
          eje: "Colaboraci√≥n remota",
          etiquetas: ["Equilibrio y control", "Bienestar"],
          nivelEsperado: "alto",
          descripcion:
            "Durante una jornada larga de clases virtuales, el grupo acuerda hacer peque√±as pausas activas, apagar la c√°mara cuando sea posible para descansar y alternar actividades expositivas con din√°micas participativas.",
          explicacion:
            "La estrategia equilibra el uso de la tecnolog√≠a con el cuidado f√≠sico y mental. Mantiene la atenci√≥n sin exigir estar conectado de forma intensa y constante.",
          mejora:
            "Tambi√©n se pueden usar recordatorios de postura, ejercicios de respiraci√≥n y normas de respeto para que nadie se sienta obligado a mostrar siempre su entorno."
        },
        {
          id: 9,
          icono: "üí¨",
          titulo: "Chat del grupo funcionando 24/7",
          eje: "Colaboraci√≥n remota",
          etiquetas: ["Conexiones saludables", "L√≠mites"],
          nivelEsperado: "medio",
          descripcion:
            "Un grupo de clase tiene un chat donde se habla de tareas, avisos y tambi√©n temas sociales. Es √∫til, pero a veces llegan mensajes a horas muy tarde y algunos sienten presi√≥n de contestar siempre.",
          explicacion:
            "La pr√°ctica es √∫til para coordinar, pero sin acuerdos puede generar presi√≥n constante y afectar el descanso.",
          mejora:
            "Es buena idea definir horarios aproximados para temas acad√©micos y aclarar que nadie est√° obligado a responder de inmediato. Tambi√©n se pueden usar canales separados para temas sociales y acad√©micos."
        },
        {
          id: 10,
          icono: "üîé",
          titulo: "Buscar solo en la primera p√°gina de resultados",
          eje: "Productividad digital",
          etiquetas: ["Optimizaci√≥n de habilidades digitales", "Pensamiento cr√≠tico"],
          nivelEsperado: "medio",
          descripcion:
            "Para un trabajo, una estudiante solo revisa los dos primeros enlaces del buscador, sin comparar fuentes ni explorar otros formatos como videos, infograf√≠as o art√≠culos acad√©micos.",
          explicacion:
            "La estrategia es aceptable como punto de inicio, pero limita la calidad de la informaci√≥n y no aprovecha todo el potencial de los recursos digitales.",
          mejora:
            "Compara varias fuentes, revisa qui√©n publica la informaci√≥n y busca distintos formatos (art√≠culos, videos, podcasts, infograf√≠as) para tener una visi√≥n m√°s completa."
        }
      ];

      // -------------------------
      // Referencias a elementos
      // -------------------------
      const listaEscenarios = document.getElementById("lista-escenarios");
      const mensajePrincipal = document.getElementById("mensaje-principal");
      const progresoBarra = document.getElementById("progreso-barra");
      const statAciertos = document.getElementById("stat-aciertos");
      const statErrores = document.getElementById("stat-errores");
      const resueltosNum = document.getElementById("resueltos-num");
      const totalNum = document.getElementById("total-num");
      const estadoPasos = document.getElementById("estado-pasos");

      const detalleTitulo = document.getElementById("detalle-titulo");
      const detalleDescripcion = document.getElementById("detalle-descripcion");
      const detalleBadges = document.getElementById("detalle-badges");
      const botonesNivel = Array.from(document.querySelectorAll(".btn-nivel"));

      const resultadoLinea = document.getElementById("resultado-linea");
      const resultadoExplicacion = document.getElementById("resultado-explicacion");
      const resultadoMejora = document.getElementById("resultado-mejora");

      const panelMensajes = document.getElementById("panel-mensajes");

      const btnReiniciar = document.getElementById("btn-reiniciar");
      const btnSugerir = document.getElementById("btn-sugerir");

      // -------------------------
      // Estado de la simulaci√≥n
      // -------------------------
      const estado = {
        seleccionadoId: null,
        resueltos: new Set(),
        aciertos: 0,
        intentos: 0
      };

      totalNum.textContent = escenarios.length.toString();

      const mensajesInicio = [
        "Selecciona un reto y analiza qu√© tan saludable es la pr√°ctica digital.",
        "Piensa: ¬øesta forma de usar la tecnolog√≠a cuida tambi√©n a las personas?",
        "Las buenas pr√°cticas digitales combinan productividad, colaboraci√≥n y bienestar."
      ];

      const mensajesCorrecto = [
        "¬°Muy bien! Tu criterio digital va por buen camino üåü.",
        "Buen an√°lisis, has evaluado correctamente la estrategia.",
        "Excelente, est√°s afinando tu radar de buenas pr√°cticas digitales.",
        "¬°Eso es! No solo importa hacer mucho, sino hacerlo de forma saludable."
      ];

      const mensajesError = [
        "Casi‚Ä¶ vuelve a leer la situaci√≥n con calma.",
        "Piensa si esta pr√°ctica ayuda a todos o solo complica las cosas.",
        "F√≠jate si hay se√±ales de falta de equilibrio o poca inclusi√≥n.",
        "Vuelve a preguntarte: ¬øes realmente la mejor forma de usar la tecnolog√≠a aqu√≠?"
      ];

      const mensajesFinal = [
        "Has completado todos los retos. ¬°Tu kit de habilidades digitales se fortaleci√≥! üß∞",
        "Simulaci√≥n completada. Est√°s listo/a para colaborar mejor en entornos digitales üí™.",
        "Gran trabajo, sigues construyendo h√°bitos digitales sanos y efectivos ‚≠ê."
      ];

      function elegirMensaje(lista) {
        return lista[Math.floor(Math.random() * lista.length)];
      }

      function agregarMensajeLog(texto, tipo = "info") {
        const div = document.createElement("div");
        div.classList.add("mensaje");
        if (tipo === "ok") div.classList.add("mensaje-ok");
        if (tipo === "error") div.classList.add("mensaje-error");
        if (tipo === "info") div.classList.add("mensaje-info");

        const iconos = {
          info: "üí¨",
          ok: "‚úÖ",
          error: "‚ö†Ô∏è"
        };

        const icono = iconos[tipo] || "üí¨";
        const ahora = new Date();
        const hora = ahora.toLocaleTimeString("es-PE", {
          hour: "2-digit",
          minute: "2-digit"
        });

        div.innerHTML = `<strong>${icono}</strong> ${texto} <small>(${hora})</small>`;
        panelMensajes.prepend(div);
      }

      // -------------------------
      // Render de la lista de retos
      // -------------------------
      function renderListaEscenarios() {
        listaEscenarios.innerHTML = "";

        escenarios.forEach(esc => {
          const item = document.createElement("div");
          item.className = "escenario";
          if (estado.resueltos.has(esc.id)) {
            item.classList.add("escenario-resuelto");
          }
          item.dataset.id = esc.id.toString();

          const icono = document.createElement("div");
          icono.className = "escenario-icono";
          icono.textContent = esc.icono;

          const textos = document.createElement("div");
          textos.className = "escenario-textos";

          const titulo = document.createElement("div");
          titulo.className = "escenario-titulo";
          titulo.textContent = esc.titulo;

          const tags = document.createElement("div");
          tags.className = "escenario-tags";
          tags.textContent = `${esc.eje} ¬∑ ${esc.etiquetas.join(" ¬∑ ")}`;

          textos.appendChild(titulo);
          textos.appendChild(tags);

          item.appendChild(icono);
          item.appendChild(textos);

          item.addEventListener("click", () => {
            seleccionarEscenario(esc.id);
          });

          listaEscenarios.appendChild(item);
        });
      }

      function marcarEscenarioActivo(id) {
        const items = Array.from(document.querySelectorAll(".escenario"));
        items.forEach(el => {
          el.classList.remove("escenario-activo");
          const escId = parseInt(el.dataset.id, 10);
          if (escId === id) {
            el.classList.add("escenario-activo");
          }
        });
      }

      // -------------------------
      // Mostrar detalle de un reto
      // -------------------------
      function seleccionarEscenario(id) {
        estado.seleccionadoId = id;
        const esc = escenarios.find(e => e.id === id);
        if (!esc) return;

        marcarEscenarioActivo(id);

        detalleTitulo.innerHTML = `${esc.icono} <span>${esc.titulo}</span>`;
        detalleDescripcion.textContent = esc.descripcion;

        detalleBadges.innerHTML = "";
        const badgeEje = document.createElement("span");
        badgeEje.className = "badge-mini badge-eje";
        badgeEje.textContent = esc.eje;

        detalleBadges.appendChild(badgeEje);

        esc.etiquetas.forEach(et => {
          const b = document.createElement("span");
          b.className = "badge-mini";
          if (et.toLowerCase().includes("equilibrio") || et.toLowerCase().includes("bienestar") || et.toLowerCase().includes("salud")) {
            b.classList.add("badge-bienestar");
          }
          b.textContent = et;
          detalleBadges.appendChild(b);
        });

        botonesNivel.forEach(btn => {
          btn.classList.remove("btn-nivel-desactivado");
        });

        resultadoLinea.textContent = "Elige qu√© tan efectiva te parece esta estrategia‚Ä¶";
        resultadoLinea.classList.remove("ok", "error");
        resultadoExplicacion.textContent = "";
        resultadoMejora.textContent = "";

        agregarMensajeLog(
          `Analizando reto: "${esc.titulo}". Eval√∫a si la pr√°ctica es poco efectiva, aceptable o muy saludable.`,
          "info"
        );
      }

      // -------------------------
      // Evaluar elecci√≥n
      // -------------------------
      function evaluarNivel(nivelElegido) {
        if (estado.seleccionadoId === null) {
          agregarMensajeLog("Primero selecciona un reto en la lista.", "error");
          return;
        }

        const esc = escenarios.find(e => e.id === estado.seleccionadoId);
        if (!esc) return;

        const acierto = esc.nivelEsperado === nivelElegido;
        estado.intentos++;

        if (acierto) {
          estado.aciertos++;
          estado.resueltos.add(esc.id);

          resultadoLinea.textContent = elegirMensaje(mensajesCorrecto);
          resultadoLinea.classList.remove("error");
          resultadoLinea.classList.add("ok");

          resultadoExplicacion.textContent = esc.explicacion;
          resultadoMejora.textContent = "Para seguir mejorando: " + esc.mejora;

          agregarMensajeLog(
            `Has evaluado correctamente el reto: "${esc.titulo}".`,
            "ok"
          );
        } else {
          resultadoLinea.textContent = elegirMensaje(mensajesError);
          resultadoLinea.classList.remove("ok");
          resultadoLinea.classList.add("error");

          resultadoExplicacion.textContent =
            "Tu clasificaci√≥n puede mejorar. Observa si la estrategia realmente cuida tanto la productividad como el bienestar y la colaboraci√≥n.";
          resultadoMejora.textContent =
            "Vuelve a leer el reto y piensa si hay formas m√°s creativas, inclusivas o equilibradas de usar la tecnolog√≠a en esa situaci√≥n.";

          agregarMensajeLog(
            `Tu evaluaci√≥n para "${esc.titulo}" puede mejorar. Intenta de nuevo.`,
            "error"
          );
        }

        actualizarEstadoGlobal();
        renderListaEscenarios();

        if (estado.resueltos.size === escenarios.length) {
          mensajePrincipal.textContent = elegirMensaje(mensajesFinal);
          estadoPasos.classList.add("badge-ok");
        }
      }

      // -------------------------
      // Actualizar estado global
      // -------------------------
      function actualizarEstadoGlobal() {
        resueltosNum.textContent = estado.resueltos.size.toString();
        statAciertos.textContent = `‚úÖ Aciertos: ${estado.aciertos}`;
        statErrores.textContent = `‚ö†Ô∏è Intentos: ${estado.intentos}`;

        const porcentaje = (estado.resueltos.size / escenarios.length) * 100;
        progresoBarra.style.width = porcentaje + "%";

        if (estado.resueltos.size === 0) {
          mensajePrincipal.textContent = elegirMensaje(mensajesInicio);
          estadoPasos.classList.remove("badge-ok");
        } else if (estado.resueltos.size < escenarios.length) {
          mensajePrincipal.textContent =
            "Sigue evaluando retos para fortalecer tu productividad y colaboraci√≥n digital.";
        }
      }

      // -------------------------
      // Reiniciar simulaci√≥n
      // -------------------------
      function reiniciarSimulacion() {
        estado.seleccionadoId = null;
        estado.resueltos = new Set();
        estado.aciertos = 0;
        estado.intentos = 0;

        progresoBarra.style.width = "0%";
        resueltosNum.textContent = "0";
        statAciertos.textContent = "‚úÖ Aciertos: 0";
        statErrores.textContent = "‚ö†Ô∏è Intentos: 0";
        mensajePrincipal.textContent = elegirMensaje(mensajesInicio);
        estadoPasos.classList.remove("badge-ok");

        detalleTitulo.innerHTML = '<span>üëÄ Selecciona un reto en la lista para empezar.</span>';
        detalleDescripcion.textContent =
          "Ver√°s aqu√≠ la descripci√≥n completa del reto sobre productividad, colaboraci√≥n o bienestar digital.";
        detalleBadges.innerHTML = "";
        botonesNivel.forEach(btn => btn.classList.add("btn-nivel-desactivado"));
        resultadoLinea.textContent = "Resultado de tu elecci√≥n‚Ä¶";
        resultadoLinea.classList.remove("ok", "error");
        resultadoExplicacion.textContent = "";
        resultadoMejora.textContent = "";

        panelMensajes.innerHTML = "";
        agregarMensajeLog(
          "Simulaci√≥n reiniciada. Vuelve a practicar tus habilidades de productividad y colaboraci√≥n digital.",
          "info"
        );

        renderListaEscenarios();
      }

      // -------------------------
      // Sugerir siguiente reto
      // -------------------------
      function sugerirSiguienteReto() {
        const pendientes = escenarios.filter(e => !estado.resueltos.has(e.id));
        if (pendientes.length === 0) {
          agregarMensajeLog(
            "Ya has trabajado con todos los retos. Reinicia la simulaci√≥n para practicar de nuevo.",
            "info"
          );
          return;
        }

        // Prioriza algunos ejes clave: equilibrio, inclusi√≥n, colaboraci√≥n global
        const prioritarios = pendientes.filter(e =>
          e.etiquetas.some(tag =>
            /equilibrio|bienestar|inclusi|colaboraci√≥n global|sostenibilidad/i.test(tag)
          )
        );
        const listaBase = prioritarios.length > 0 ? prioritarios : pendientes;
        const elegido = listaBase[Math.floor(Math.random() * listaBase.length)];

        seleccionarEscenario(elegido.id);
        agregarMensajeLog(
          `Sugerencia: revisa el reto "${elegido.titulo}" y eval√∫a su estrategia digital.`,
          "info"
        );
      }

      // -------------------------
      // Listeners de botones
      // -------------------------
      botonesNivel.forEach(btn => {
        btn.addEventListener("click", () => {
          if (btn.classList.contains("btn-nivel-desactivado")) return;
          const nivel = btn.dataset.nivel;
          evaluarNivel(nivel);
        });
      });

      btnReiniciar.addEventListener("click", reiniciarSimulacion);
      btnSugerir.addEventListener("click", sugerirSiguienteReto);

      // -------------------------
      // Inicializaci√≥n
      // -------------------------
      renderListaEscenarios();
      actualizarEstadoGlobal();
      agregarMensajeLog(
        "Bienvenido al laboratorio de productividad y colaboraci√≥n digital. Empieza seleccionando un reto.",
        "info"
      );
    })();
  </script>
</body>
</html>
