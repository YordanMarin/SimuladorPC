<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Ensamblaje PC Básico</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        h2 { color: #333; }
        #status-message {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #e2e8f0;
            border-radius: 5px;
            font-weight: bold;
            color: #2d3748;
        }

        .container {
            display: flex;
            gap: 30px;
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Estilos de la zona de componentes (Izquierda) */
        .parts-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .component {
            width: 120px;
            height: 60px;
            background-color: #4299e1;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            cursor: grab;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        .component:active { transform: scale(0.98); cursor: grabbing; }
        /* Colores distintos para cada componente */
        #comp-placa { background-color: #dd6b20; } /* Naranja */
        #comp-cpu { background-color: #3182ce; } /* Azul */
        #comp-ram { background-color: #38a169; } /* Verde */
        #comp-gpu { background-color: #805ad5; } /* Morado */
        #comp-fuente { background-color: #718096; } /* Gris */

        /* Estilos de la zona de ensamblaje (Derecha) */
        .build-zone {
            width: 400px;
            height: 500px;
            background-color: #2d3748; /* Color gabinete oscuro */
            border: 3px dashed #cbd5e0;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            color: #a0aec0;
        }
        .build-zone.drag-over {
            border-color: #48bb78;
            background-color: #2f3e52;
        }

        /* Clase para componentes ya instalados */
        .installed {
            position: absolute;
            cursor: default;
            box-shadow: none;
            opacity: 0.9;
        }
        /* Posiciones simuladas dentro del gabinete */
        #installed-placa { width: 90%; height: 80%; z-index: 1; background-color: #c05621; top: 10%; }
        #installed-cpu { width: 60px; height: 60px; z-index: 2; top: 30%; }
        #installed-ram { width: 100px; height: 30px; z-index: 2; top: 20%; left: 55%; }
        #installed-gpu { width: 70%; height: 40px; z-index: 3; bottom: 25%; }
        #installed-fuente { width: 120px; height: 80px; z-index: 3; bottom: 5%; right: 5%; background-color: #4a5568; }

    </style>
</head>
<body>

    <h2>Simulador de Ensamblaje Web</h2>
    <div id="status-message">Instrucción: Comienza arrastrando la Placa Base al gabinete.</div>

    <div class="container">
        <div class="parts-panel" id="parts-list">
            <div class="component" draggable="true" id="comp-fuente">Fuente de Poder</div>
            <div class="component" draggable="true" id="comp-gpu">Tarjeta Gráfica</div>
            <div class="component" draggable="true" id="comp-cpu">Procesador (CPU)</div>
            <div class="component" draggable="true" id="comp-placa">Placa Base</div>
            <div class="component" draggable="true" id="comp-ram">Memoria RAM</div>
        </div>

        <div class="build-zone" id="case-dropzone">
            <p>Arrastra los componentes aquí</p>
        </div>
    </div>


    <script>
        // --- Lógica del Simulador ---

        // Definimos el orden CORRECTO de ensamblaje por sus IDs
        const assemblyOrder = ['comp-placa', 'comp-cpu', 'comp-ram', 'comp-gpu', 'comp-fuente'];
        let currentStep = 0; // Empezamos en el paso 0

        const parts = document.querySelectorAll('.component');
        const dropZone = document.getElementById('case-dropzone');
        const statusMsg = document.getElementById('status-message');

        // Configurar elementos arrastrables (Las piezas)
        parts.forEach(part => {
            part.addEventListener('dragstart', dragStart);
        });

        // Configurar zona de destino (El gabinete)
        dropZone.addEventListener('dragover', dragOver);
        dropZone.addEventListener('dragleave', dragLeave);
        dropZone.addEventListener('drop', dropEvent);

        // Funciones de eventos
        function dragStart(e) {
            // Guardamos el ID del elemento que estamos arrastrando
            e.dataTransfer.setData('text/plain', e.target.id);
            setTimeout(() => {
                e.target.style.opacity = '0.5';
            }, 0);
        }

        function dragOver(e) {
            e.preventDefault(); // Necesario para permitir soltar
            dropZone.classList.add('drag-over');
        }

        function dragLeave(e) {
            dropZone.classList.remove('drag-over');
        }

        function dropEvent(e) {
            e.preventDefault();
            dropZone.classList.remove('drag-over');

            // Obtenemos el ID del elemento soltado
            const draggedItemId = e.dataTransfer.getData('text');
            const draggedElement = document.getElementById(draggedItemId);

            // --- VALIDACIÓN DE LÓGICA ---
            // Verificamos si la pieza soltada es la correcta para este paso
            if (draggedItemId === assemblyOrder[currentStep]) {
                // ¡Correcto!
                installComponent(draggedElement);
            } else {
                // ¡Incorrecto!
                showError(draggedItemId);
                draggedElement.style.opacity = '1'; // Restaurar opacidad
            }
        }

        function installComponent(element) {
            // 1. Clones el elemento para ponerlo en el gabinete
            const installedComponent = element.cloneNode(true);
            installedComponent.classList.add('installed');
            installedComponent.setAttribute('draggable', 'false'); // Ya no se puede mover
            // Cambiamos ID para estilos de posicionamiento
            installedComponent.id = 'installed-' + element.id.replace('comp-', '');

            // 2. Lo añadimos al gabinete
            dropZone.appendChild(installedComponent);

            // 3. Eliminamos el original de la lista de piezas
            element.remove();

            // 4. Actualizamos el estado
            currentStep++;
            updateStatus();
        }

        function updateStatus() {
            const nextPartId = assemblyOrder[currentStep];

            if (currentStep >= assemblyOrder.length) {
                statusMsg.innerHTML = "✅ ¡Felicidades! PC ensamblada correctamente.";
                statusMsg.style.backgroundColor = "#c6f6d5";
            } else {
                // Buscar el nombre legible del siguiente componente
                const nextPartName = document.getElementById(nextPartId).innerText;
                statusMsg.innerText = `✅ Correcto. Siguiente paso: Instala ${nextPartName}.`;
                statusMsg.style.backgroundColor = "#e2e8f0";
            }
        }

        function showError(wrongId) {
            const wrongName = document.getElementById(wrongId).innerText;
            const correctId = assemblyOrder[currentStep];
            const correctName = document.getElementById(correctId).innerText;
            
            statusMsg.innerText = `❌ Error: No puedes instalar ${wrongName} todavía. Primero necesitas instalar ${correctName}.`;
            statusMsg.style.backgroundColor = "#fed7d7";
        }
    </script>

</body>
</html>
